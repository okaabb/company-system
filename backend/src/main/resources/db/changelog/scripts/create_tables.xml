<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet id="1" author="user">
        <createTable tableName="applicant">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="mobile_number" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="department">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="manager_id" type="bigint">
                <constraints nullable="true"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="employee">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="mobile_number" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="national_id" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="user_name" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="department_id" type="bigint">
                <constraints nullable="true" foreignKeyName="FK_EmployeeDepartment" references="department(id)"/>
            </column>
            <column name="hire_date" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="position" type="ENUM('IT', 'DEV', 'HR', 'PO', 'MANAGER','TEAM_LEAD', 'CEO')">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="application">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="applicant_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_ApplicationApplicant" references="applicant(id)"/>
            </column>
            <column name="hr_id" type="bigint">
                <constraints nullable="true" foreignKeyName="FK_ApplicationHr" references="employee(id)"/>
            </column>
            <column name="department_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_ApplicationDepartment" references="department(id)"/>
            </column>
            <column name="referral_employee_id" type="bigint">
                <constraints nullable="true" foreignKeyName="FK_ApplicationReferralEmployee" references="employee(id)"/>
            </column>
            <column name="application_status" type="ENUM('PENDING','ACCEPTED', 'REJECTED')">
                <constraints nullable="false"/>
            </column>
            <column name="linkedin_profile_url" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="referral_type" type="ENUM('WEBSITE', 'EMPLOYEE')">
                <constraints nullable="false"/>
            </column>
            <column name="position" type="ENUM('IT', 'DEV', 'HR','PO','MANAGER','TEAM_LEAD')">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="duty">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="type" type="ENUM('VACATION', 'WORK_FROM_HOME', 'SICK_LEAVE', 'WORK_FROM_OFFICE')">
                <constraints nullable="false"/>
            </column>
            <column name="employee_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_DutyEmployee" references="employee(id)"/>
            </column>
            <column name="approved_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="record_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="duty_date_from" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="duty_date_to" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="ENUM('PENDING', 'REJECTED', 'ACCEPTED')">
                <constraints nullable="false"/>
            </column>
            <column name="working_hours_per_day" type="float">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="hiring_phase">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name"
                    type="ENUM('APPLICATION_REVIEW', 'SCREENING_INTERVIEW', 'TECHNICAL_INTERVIEW', 'HR_INTERVIEW', 'HIRED', 'REJECTED')">
                <constraints nullable="false"/>
            </column>
            <column name="application_id" type="bigint">
                <constraints nullable="true" foreignKeyName="FK_HiringPhaseApplication" references="applicant(id)"/>
            </column>
            <column name="final_score" type="int">
                <constraints nullable="true"/>
            </column>
            <column name="status" type="ENUM('ONGOING', 'PENDING','REJECTED', 'ACCEPTED')">
                <constraints nullable="true"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="phase_interviewer">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="phase_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_HiringPhaseName" references="hiring_phase(id)"/>
            </column>
            <column name="interviewer_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_HiringPhaseInterviewer" references="employee(id)"/>
            </column>
            <column name="notes" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="score" type="float">
                <constraints nullable="true"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="team">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="team_lead_id" type="bigint">
                <constraints nullable="true" foreignKeyName="FK_TeamTL" references="employee(id)"/>
            </column>
            <column name="department_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_TeamDepartmen" references="department(id)"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="team_member">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="team_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_TeamMemberTeam" references="team(id)"/>
            </column>
            <column name="employee_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_TeamMemberEmployee" references="employee(id)"/>
            </column>
            <column name="role" type="ENUM('DEV', 'TEAM_LEAD','MANAGER','TESTER')">
                <constraints nullable="true"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="sprint">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="start_date" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="end_date" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="creator" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_SprintCreator" references="employee(id)"/>
            </column>
            <column name="team_id" type="bigint">
                <constraints nullable="true" foreignKeyName="FK_SprintTeam" references="team(id)"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="task">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
            <column name="sprint_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_TaskSprint" references="sprint(id)"/>
            </column>
            <column name="employee_id" type="bigint">
                <constraints nullable="true" foreignKeyName="FK_TaskAssignedBy" references="employee(id)"/>
            </column>
            <column name="assigned_by_id" type="bigint">
                <constraints nullable="true" foreignKeyName="FK_TaskEmployee" references="employee(id)"/>
            </column>
            <column name="duration" type="float">
                <constraints nullable="true"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="training">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="creator" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_TrainingCreator" references="employee(id)"/>
            </column>
            <column name="created_date" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="training_hours" type="float">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <createTable tableName="employee_training">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="training_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_EmployeeTrainingTraining" references="training(id)"/>
            </column>
            <column name="employee_id" type="bigint">
                <constraints nullable="false" foreignKeyName="FK_EmployeeTrainingEmployee" references="employee(id)"/>
            </column>
            <column name="enrollment_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="date">
                <constraints nullable="true"/>
            </column>
            <column name="created_by" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="updated_by" type="bigint">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseTableName="department" baseColumnNames="manager_id"
                                 constraintName="FK_DepartmentManager" referencedTableName="employee"
                                 referencedColumnNames="id"/>
    </changeSet>

</databaseChangeLog>